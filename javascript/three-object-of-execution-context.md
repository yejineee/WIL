# ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ì„¸ ê°€ì§€ ê°ì²´ \(VO, SC, this\)

ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” ë¬¼ë¦¬ì ìœ¼ë¡œ ê°ì²´ì˜ í˜•íƒœë¥¼ ê°€ì§€ë©°, 3ê°€ì§€ í”„ë¡œí¼í‹°ë¥¼ ê°–ê³  ìˆë‹¤.

1. ë³€ìˆ˜ ê°ì²´ \(variable object\)
2. ìŠ¤ì½”í”„ ì²´ì¸ \(scope chain\)
3. this value 

## ğŸ’« ë³€ìˆ˜ ê°ì²´ \(VO\)

ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ë©´, ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ì´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì— í•„ìš”í•œ ì •ë³´ë¥¼ ë‹´ì„ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ”ë° ì´ë¥¼ **ë³€ìˆ˜ ê°ì²´**ë¼ê³  í•œë‹¤.

* ë³€ìˆ˜ ê°ì²´ëŠ” ì½”ë“œê°€ ì‹¤í–‰ë  ë•Œ, ì—”ì§„ì´ ì°¸ì¡°í•œë‹¤.
* ì½”ë“œì—ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤. 

ë³€ìˆ˜ê°ì²´ëŠ” ì•„ë˜ì˜ ì •ë³´ë¥¼ ë‹´ëŠ”ë‹¤.

> 1. ë§¤ê°œë³€ìˆ˜ \(parameters\)ì™€ ì¸ìˆ˜ ì •ë³´\(arguments\) - í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ì˜ ê²½ìš°
> 2. í•¨ìˆ˜ ì„ ì–¸ - í•¨ìˆ˜ í‘œí˜„ì‹ì€ ì œì™¸
> 3. ë³€ìˆ˜

* ë³€ìˆ˜ ê°ì²´ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ í”„ë¡œí¼í‹°ì´ê³ , ì´ ë³€ìˆ˜ ê°ì²´ëŠ” ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤. 
* ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì— ë”°ë¼ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ê°€ ë‹¤ë¥´ë‹¤.

  ì „ì—­ ì½”ë“œ \(Global Code\)ì™€ í•¨ìˆ˜ ì½”ë“œ \(Function Code\) ì‹¤í–‰ì‹œ ìƒì„±ë˜ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì— ë”°ë¼ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ê°€ ë‹¤ë¥´ë‹¤. ì´ëŠ” ì „ì—­ ì½”ë“œì™€ í•¨ìˆ˜ ì½”ë“œì˜ ë‚´ìš©ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì „ì—­ ì½”ë“œì—ëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ì—†ê³ , í•¨ìˆ˜ ì½”ë“œì—ëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ìˆë‹¤.

### ì „ì—­ ì»¨í…ìŠ¤íŠ¸ì˜ ê²½ìš°

* **ì „ì—­ ê°ì²´**\(Global Object / GO\)ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
* ë³€ìˆ˜ ê°ì²´ëŠ” _ìœ ì¼_í•˜ê³ , _ìµœìƒìœ„_ì— ìœ„ì¹˜í•œë‹¤.
* ëª¨ë“  **ì „ì—­ ë³€ìˆ˜**ì™€, **ì „ì—­ í•¨ìˆ˜**ë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°–ëŠ”ë‹¤.

![](https://i.imgur.com/xp8905O.png)

### í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ì˜ ê²½ìš°

* **í™œì„± ê°ì²´**\(Activation Object / AO\)ë¥¼ ê°€ë¦¬í‚¨ë‹¤. 
* **ì§€ì—­ ë³€ìˆ˜**ì™€ **ë‚´ë¶€ í•¨ìˆ˜**ë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°–ëŠ”ë‹¤. 
* í”„ë¡œí¼í‹°ì— ì¸ìˆ˜ë“¤ì˜ ì •ë³´ë¥¼ ë°°ì—´ë¡œ ë‹´ê³  ìˆëŠ” ê°ì²´ì¸ **arguments object**ê°€ ì¶”ê°€ëœë‹¤.

![](https://i.imgur.com/5U5BWj4.png)

## ğŸ’« ìŠ¤ì½”í”„ ì²´ì¸ \(SC\)

![](https://i.imgur.com/BCKB4Du.png)

* ìŠ¤ì½”í”„ì²´ì¸ì€ **í•´ë‹¹ ì»¨í…ìŠ¤íŠ¸ê°€ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ ê°ì²´\(ì „ì—­ ê°ì²´ ë˜ëŠ” í™œì„± ê°ì²´\)ì˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ë‹´ê³  ìˆëŠ” ë¦¬ìŠ¤íŠ¸**ì´ë‹¤. 
* ë¨¼ì € í˜„ì¬ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ í™œì„± ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê³ , ìƒìœ„ ì»¨í…ìŠ¤íŠ¸ì˜ í™œì„± ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ë‹¤ê°€, ë§ˆì§€ë§‰ì—ëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
* ì—”ì§„ì€ ìŠ¤ì½”í”„ ì²´ì¸ì„ í†µí•´ **ë ‰ì‹œì»¬ ìŠ¤ì½”í”„**ë¥¼ íŒŒì•…í•œë‹¤. 
* ìŠ¤ì½”í”„ ì²´ì¸ì€ _variable lookup_ ì— ì‚¬ìš©ëœë‹¤.

  ë³€ìˆ˜ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œ ë¨¼ì € í˜„ì¬ ìŠ¤ì½”í”„, ì¦‰ Activation Objectì—ì„œ ê²€ìƒ‰í•˜ê³ , ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ìŠ¤ì½”í”„ ì²´ì¸ì— ë‹´ê¸´ ìˆœì„œëŒ€ë¡œ ê²€ìƒ‰ì„ í•˜ê²Œ ëœë‹¤. 

  \(ì˜ˆ\) AO -&gt; AO -&gt; ... -&gt; GO \(Global Object\)

* ìŠ¤ì½”í”„ ì²´ì¸ì„ í†µí•´ ê²€ìƒ‰ì„ í•˜ë‹¤ê°€, ê²€ìƒ‰ì— ì‹¤íŒ¨í•˜ë©´ _Reference Error_ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.

```javascript
function testNotFoundVar() {
  console.log(notDefVar);
}
testNotFoundVar(); // ReferenceError: notDefVar is not defined
```

* í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ì˜ ìŠ¤ì½”í”„ì²´ì¸ì€ _í•¨ìˆ˜ í˜¸ì¶œ_ ì‹œ ìƒì„±ë˜ë©°, activation objectì™€ ì´ í•¨ìˆ˜ì˜ ë‚´ë¶€ í”„ë¡œí¼í‹°ì¸ `[[Scope]]`ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

> Scope = AO + `[[Scope]]`

* í•¨ìˆ˜ ê°ì²´ì˜ `[[Scopes]]`í”„ë¡œí¼í‹°
  * í•¨ìˆ˜ ê°ì²´ëŠ” `[[Scopes]]` í”„ë¡œí¼í‹°ë¥¼ ê°–ê³  ìˆë‹¤. 
  * `[[Scopes]]` í”„ë¡œí¼í‹°ëŠ” í•¨ìˆ˜ ê°ì²´ì˜ ë‚´ë¶€ í”„ë¡œí¼í‹°ë¡œ **í•¨ìˆ˜ ê°ì²´ê°€ ì‹¤í–‰ë˜ëŠ” í™˜ê²½**ì„ ê°€ë¦¬í‚¨ë‹¤. 
  * ì¦‰ í˜„ì¬ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ **ìŠ¤ì½”í”„ ì²´ì¸ì´ ì°¸ì¡°í•˜ê³  ìˆëŠ” ê°ì²´**ë¥¼ ê°€ë¦¬í‚¨ë‹¤. 
  * `[[Scopes]]` í”„ë¡œí¼í‹°ëŠ” ìì‹ ì˜ ì‹¤í–‰ í™˜ê²½ Lexical Environmentì™€ ìì‹ ì„ í¬í•¨í•˜ëŠ” ì™¸ë¶€ í•¨ìˆ˜ì˜ ì‹¤í–‰ í™˜ê²½ì¸ AOì™€ ì „ì—­ ê°ì²´\(Global Object\)ë¥¼ ê°€ë¦¬í‚¤ê²Œ ëœë‹¤. 
  * ì´ ë•Œ, ì™¸ë¶€ í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì†Œë©¸í•˜ì—¬ë„ `[[Scopes]]`ëŠ” ì™¸ë¶€ í•¨ìˆ˜ì˜ ì‹¤í–‰ í™˜ê²½ì„ ì—¬ì „íˆ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ **í´ë¡œì €**ë¼ê³  í•œë‹¤. 

#### `[[Scopes]]` vs ìŠ¤ì½”í”„ ì²´ì¸

* â—ï¸ í•¨ìˆ˜ì˜ ìƒëª… ì£¼ê¸°ëŠ” _ìƒì„±\(creation\)_ ê³¼ _í˜¸ì¶œ\(call\)_ ë¡œ êµ¬ë¶„ëœë‹¤. 
* `[[Scopes]]` ëŠ” _í•¨ìˆ˜ ê°ì²´_ ì˜ í”„ë¡œí¼í‹°ì´ë©°, í•¨ìˆ˜ _ìƒì„±_ ë‹¨ê³„ì—ì„œ ê²°ì •ëœë‹¤.
* ìŠ¤ì½”í”„ ì²´ì¸ \(SC\)ì€ _í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸_ ì˜ í”„ë¡œí¼í‹°ì´ê³ , í•¨ìˆ˜ _í˜¸ì¶œ_ ì‹œ í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„± ë  ë•Œ, ì œì¼ ë¨¼ì € ê²°ì •ëœë‹¤.

#### ìŠ¤ì½”í”„ ì²´ì¸ vs í”„ë¡œí† íƒ€ì… ì²´ì¸

> Scope chain is related with an execution context a chain of variable objects which is used for variables lookup at _identifier_ resolution.

* ìŠ¤ì½”í”„ ì²´ì¸ : ì‹ë³„ì ì¤‘ì—ì„œ _ë³€ìˆ˜_ ë¥¼ ê²€ìƒ‰í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤. ë‹¨, ì „ì—­ ê°ì²´ëŠ” ê°ì²´ì˜ í”„ë¡œí¼í‹°ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.
* í”„ë¡œí† íƒ€ì… ì²´ì¸ : ì‹ë³„ìì¤‘ì—ì„œ _ê°ì²´ì˜ í”„ë¡œí¼í‹°_ ë¥¼ ê²€ìƒ‰í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤. 

## ğŸ’« this value

* thisê°’ì´ í• ë‹¹ë˜ë©°, thisëŠ” í•¨ìˆ˜ í˜¸ì¶œ íŒ¨í„´ì— ì˜í•´ ê²°ì •ëœë‹¤.

## ì°¸ì¡°

* [ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì™€ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë™ì‘ ì›ë¦¬ - poiemaweb](https://poiemaweb.com/js-execution-context)
* [dmitrysoshnikov.com/ecmascript/chapter-4-scope-chain](http://dmitrysoshnikov.com/ecmascript/chapter-4-scope-chain/#function-creation)

