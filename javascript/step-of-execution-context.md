# ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ìƒì„± ê³¼ì •

ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ëŠ” ê³¼ì •ì„ ì•Œì•„ë³¸ë‹¤. `[[Scopes]]` í”„ë¡œí¼í‹°, ë³€ìˆ˜ í˜¸ì´ìŠ¤íŒ…, í•¨ìˆ˜ í˜¸ì´ìŠ¤íŒ…ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.

ì•„ë˜ì˜ ì½”ë“œë¡œ ì–´ë–»ê²Œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ëŠ”ì§€ ì•Œì•„ë³´ì.

```javascript
var x = 'xxx';

function foo () {
  var y = 'yyy';

  function bar () {
    var z = 'zzz';
    console.log(x + y + z);
  }
  bar();
}

foo();
```

## ğŸ“Œ 1. ì „ì—­ ì½”ë“œ \(Global Code\)ë¡œ ì§„ì…

* ì»¨íŠ¸ë¡¤ì´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì— ì§„ì…í•˜ê¸° ì „ì— **ì „ì—­ê°ì²´\(Global Object/GO\)ê°€ ìƒì„±**ëœë‹¤. 
* ì „ì—­ê°ì²´ëŠ” ìœ ì¼í•˜ë©°, ê°ì²´ì˜ í”„ë¡œí¼í‹°ëŠ” ì½”ë“œì—ì„œ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.
* ì´ˆê¸° ìƒíƒœì—ëŠ” ë¹ŒíŠ¸ì¸ ê°ì²´ì¸ Math, String, Array ë“±ê³¼ BOM, DOMì´ ì„¤ì •ë˜ì–´ ìˆë‹¤. ![](https://i.imgur.com/vyeqaEe.png)
* ì „ì—­ ì½”ë“œë¡œ ì»¨íŠ¸ë¡¤ì´ ì§„ì…í•˜ë©´, ì „ì—­ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ê³ , ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— ìŒ“ì¸ë‹¤. ![](https://i.imgur.com/uO2SdGc.png)

ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì—ëŠ” ìŠ¤ì½”í”„ ì²´ì¸, ë³€ìˆ˜ ê°ì²´, this valueê°€ ìˆë‹¤. ì´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒì˜ ì²˜ë¦¬ê°€ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ëœë‹¤. \(1 -&gt; 2 -&gt; 3\)

> 1. ìŠ¤ì½”í”„ì²´ì¸ ìƒì„±ê³¼ ì´ˆê¸°í™”
> 2. ë³€ìˆ˜ ê°ì²´í™” ì‹¤í–‰
> 3. this value ê²°ì •

### 1-1. ìŠ¤ì½”í”„ì²´ì¸ ìƒì„±ê³¼ ì´ˆê¸°í™”

`ìŠ¤ì½”í”„ ì²´ì¸`ì€ **ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ ê°ì²´ ì°¸ì¡°ì˜ ë¦¬ìŠ¤íŠ¸**ì´ë‹¤. ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ëœ í›„, ê°€ì¥ ë¨¼ì € ìŠ¤ì½”í”„ì²´ì¸ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ê°€ ì‹¤í–‰ëœë‹¤. ì „ì—­ ì»¨í…ìŠ¤íŠ¸ì˜ ìŠ¤ì½”í”„ ì²´ì¸ì€ **ì „ì—­ ê°ì²´\(GO\)ì˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ë‹´ê³  ìˆëŠ” ë¦¬ìŠ¤íŠ¸**ê°€ ëœë‹¤. ![](https://i.imgur.com/siA2Tfb.png)

### 1-2. ë³€ìˆ˜ ê°ì²´í™”\(Variable Instantiation\) ì‹¤í–‰

* ë³€ìˆ˜ ê°ì²´í™”ëŠ” ë³€ìˆ˜ ê°ì²´\(VO\)ì— í”„ë¡œí¼í‹°ì™€ ê°’ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ë‹¤. 
* ì „ì—­ ì½”ë“œì˜ VOëŠ” ì „ì—­ ê°ì²´ Global Object\(GO\)ë¥¼ ê°€ë¦¬í‚¨ë‹¤. 
* **ë§¤ê°œë³€ìˆ˜ì™€ ì¸ìˆ˜ ì •ë³´, í•¨ìˆ˜ ì„ ì–¸, ë³€ìˆ˜ë¥¼ VOì— ì¶”ê°€í•˜ì—¬ ê°ì²´í™”**í•œë‹¤. 

![](https://i.imgur.com/xYt1WAC.png)

* **ë³€ìˆ˜ ê°ì²´í™” ìˆœì„œ**

  > 1. **ë§¤ê°œ ë³€ìˆ˜ì™€ ì¸ìˆ˜ ì •ë³´ ì¶”ê°€**
  >
  >    í•¨ìˆ˜ ì½”ë“œì˜ ê²½ìš°, VOì˜ í”„ë¡œí¼í‹°ë¡œ ë§¤ê°œë³€ìˆ˜\(parameter\), ê°’ìœ¼ë¡œ argumentê°€ ì„¤ì •ëœë‹¤.
  >
  >    ì „ì—­ ì½”ë“œì˜ ê²½ìš°, ë§¤ê°œë³€ìˆ˜ê°€ ì—†ìœ¼ë¯€ë¡œ ì´ ê³¼ì •ì€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
  >
  > 2. **í•¨ìˆ˜ í˜¸ì´ìŠ¤íŒ…**
  >
  >    ì½”ë“œ ë‚´ì˜ í•¨ìˆ˜ ì„ ì–¸\(í•¨ìˆ˜ í‘œí˜„ì‹ ì œì™¸\)ì„ ëŒ€ìƒìœ¼ë¡œ VOì˜ í”„ë¡œí¼í‹°ë¡œ í•¨ìˆ˜ëª…, ê·¸ ê°’ìœ¼ë¡œ ìƒì„±ëœ _í•¨ìˆ˜ ê°ì²´_ ê°€ ì„¤ì •ëœë‹¤.
  >
  > 3. **ë³€ìˆ˜ í˜¸ì´ìŠ¤íŒ…**
  >
  >    ì½”ë“œ ë‚´ì˜ ë³€ìˆ˜ ì„ ì–¸ì„ ëŒ€ìƒìœ¼ë¡œ VOì˜ í”„ë¡œí¼í‹°ë¡œ ë³€ìˆ˜ëª…, ê°’ìœ¼ë¡œ undefinedê°€ ì„¤ì •ëœë‹¤.

ì „ì—­ì½”ë“œì´ë¯€ë¡œ, 1ì€ ì‹¤í–‰ë˜ì§€ ì•Šê³ , ì „ì—­ í•¨ìˆ˜ì¸ foo ì„ ì–¸ì´ ì²˜ë¦¬ë˜ê³ , ê·¸ í›„ ì „ì—­ ë³€ìˆ˜ì¸ xì˜ ì„ ì–¸ì´ ì²˜ë¦¬ëœë‹¤.

#### 1-2-1 í•¨ìˆ˜ foo ì²˜ë¦¬ - foo í•¨ìˆ˜ ìƒì„±

* foo í•¨ìˆ˜ ìƒì„±ìœ¼ë¡œ VOì˜ í”„ë¡œí¼í‹°ë¡œ í•¨ìˆ˜ ì´ë¦„ì¸ fooê°€, ê°’ìœ¼ë¡œ í•¨ìˆ˜ ê°ì²´ê°€ ì„¤ì •ëœë‹¤. 

  ![](https://i.imgur.com/EtCQvdm.png)

* ì´ ë•Œ, foo í•¨ìˆ˜ì˜ `[[Scopes]]`ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

  > foo.\[\[Scopes\]\] = \[ globalContext.VO \]

* í•¨ìˆ˜ ê°ì²´ì˜ `[[Scopes]]`í”„ë¡œí¼í‹°
  * í•¨ìˆ˜ ê°ì²´ëŠ” ë‚´ë¶€ í”„ë¡œí¼í‹°ì¸ `[[Scopes]]` í”„ë¡œí¼í‹°ë¥¼ ê°–ê³  ìˆë‹¤. 
  * í˜„ì¬ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ **ìŠ¤ì½”í”„ ì²´ì¸ì´ ì°¸ì¡°í•˜ê³  ìˆëŠ” ê°ì²´**ë¥¼ ê°€ë¦¬í‚¨ë‹¤. 
  * `[[Scopes]]` í”„ë¡œí¼í‹°ëŠ” ìì‹ ì˜ ì‹¤í–‰ í™˜ê²½ Lexical Environmentì™€ ìì‹ ì„ í¬í•¨í•˜ëŠ” ì™¸ë¶€ í•¨ìˆ˜ì˜ ì‹¤í–‰ í™˜ê²½ì¸ AOì™€ ì „ì—­ ê°ì²´\(Global Object\)ë¥¼ ê°€ë¦¬í‚¤ê²Œ ëœë‹¤. 
  * ì´ ë•Œ, ì™¸ë¶€ í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì†Œë©¸í•˜ì—¬ë„ `[[Scopes]]`ëŠ” ì™¸ë¶€ í•¨ìˆ˜ì˜ ì‹¤í–‰ í™˜ê²½ì„ ì—¬ì „íˆ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ **í´ë¡œì €**ë¼ê³  í•œë‹¤. 
* **í•¨ìˆ˜ í˜¸ì´ìŠ¤íŒ…** `í•¨ìˆ˜ ì„ ì–¸ì‹` ì˜ ê²½ìš° ë³€ìˆ˜ ê°ì²´ì— í•¨ìˆ˜ëª…ì„ í”„ë¡œí¼í‹°ë¡œ, í•¨ìˆ˜ ê°ì²´ê°€ ê°’ìœ¼ë¡œ í• ë‹¹ëœë‹¤. ë”°ë¼ì„œ, í•¨ìˆ˜ ì„ ì–¸ì‹ì€ ì„ ì–¸ë¬¸ ì´ì „ì— í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

```javascript
hello(); // hello
function hello() { // í•¨ìˆ˜ ì„ ì–¸ì‹
  console.log("hello");
}
```

`í•¨ìˆ˜ í‘œí˜„ì‹`ì€ í•¨ìˆ˜ ê°ì²´ì— í•¨ìˆ˜ëª…ì„ í”„ë¡œí¼í‹°ë¡œ ì¶”ê°€í•˜ì§€ë§Œ, ê·¸ ë°©ì‹ì€ _ì¼ë°˜ ë³€ìˆ˜ì˜ ë°©ì‹_ ì„ ë”°ë¥¸ë‹¤. ë”°ë¼ì„œ, í•¨ìˆ˜ í‘œí˜„ì‹ì€ ì„ ì–¸ë¬¸ ì´ì „ì— í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.

#### 1-2-2 ë³€ìˆ˜ x ì²˜ë¦¬

ë³€ìˆ˜ëŠ” ë³€ìˆ˜ëª…ì´ VOì˜ í”„ë¡œí¼í‹°ë¡œ, undefinedê°€ ê°’ìœ¼ë¡œ ì„¤ì •ëœë‹¤. ë³€ìˆ˜ ì²˜ë¦¬ëŠ” ë‹¤ìŒ ì„¸ ë‹¨ê³„ë¡œ ë‚˜ë‰˜ì–´ì„œ ì´ë£¨ì–´ì§„ë‹¤.

> **1. ì„ ì–¸ ë‹¨ê³„**
>
> * **ë³€ìˆ˜ ê°ì²´ì— ë³€ìˆ˜ë¥¼ ë“±ë¡**í•œë‹¤. ì´ ë³€ìˆ˜ëŠ” ìŠ¤ì½”í”„ê°€ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ëŒ€ìƒì´ ëœë‹¤.
>
>   **2. ì´ˆê¸°í™” ë‹¨ê³„**
>
> * ë³€ìˆ˜ ê°ì²´ì— ë“±ë¡ëœ ë³€ìˆ˜ë¥¼ **ë©”ëª¨ë¦¬ì— í• ë‹¹**í•œë‹¤.
> * ì´ ë‹¨ê³„ì—ì„œ ë³€ìˆ˜ëŠ” undefinedë¡œ ì´ˆê¸°í™”ëœë‹¤.
>
>   **3. í• ë‹¹ ë‹¨ê³„**
>
> * ì‹¤ì œ ê°’ì„ í• ë‹¹í•œë‹¤.

**var í‚¤ì›Œë“œë¡œ ì„ ì–¸ëœ ë³€ìˆ˜ëŠ” ìŠ¤ì½”í”„ ì´ˆê¸°ì— ì„ ì–¸ ë‹¨ê³„ì™€ ì´ˆê¸°í™” ë‹¨ê³„ê°€ í•œ ë²ˆì— ì´ë£¨ì–´ì§„ë‹¤**. ë”°ë¼ì„œ, ë³€ìˆ˜ ì„ ì–¸ë¬¸ ì´ì „ì— ë³€ìˆ˜ì— ì ‘ê·¼í•˜ì—¬ë„ VOì— ë³€ìˆ˜ê°€ ìˆê³ , ë©”ëª¨ë¦¬ì—ë„ í• ë‹¹ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

```javascript
// ìŠ¤ì½”í”„ì˜ ì´ˆê¸°ì— ì„ ì–¸ ë‹¨ê³„(1)ì™€ ì´ˆê¸°í™” ë‹¨ê³„(2)ê°€ ì‹¤í–‰ëœë‹¤.
console.log(hello); // undefined
var hello;          // ë³€ìˆ˜ ì„ ì–¸ë¬¸
console.log(hello); // undefined

hello = "hello";    // í• ë‹¹ë¬¸ -> í• ë‹¹ ë‹¨ê³„(3)ê°€ ì‹¤í–‰ëœë‹¤.
console.log(hello); // hello
```

ë‹¤ë§Œ, ì•„ì§ ë³€ìˆ˜ xëŠ” 'xxx'ë¡œ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ê³ , ë³€ìˆ˜ í• ë‹¹ë¬¸ì— ë„ë‹¬í•˜ë©´ ê°’ì˜ í• ë‹¹ì´ ì´ë£¨ì–´ì§„ë‹¤. ![](https://i.imgur.com/U3Rrj7C.png)

ìœ„ì—ì„œ `í•¨ìˆ˜ í‘œí˜„ì‹`ì€ ì¼ë°˜ ë³€ìˆ˜ì˜ ë°©ì‹ì„ ë”°ë¥¸ë‹¤ê³  í•˜ì˜€ë‹¤. ë”°ë¼ì„œ, var í‚¤ì›Œë“œë¡œ ì„ ì–¸í•œ í•¨ìˆ˜ í‘œí˜„ì‹ì„ ì„ ì–¸ë¬¸ ì´ì „ì— í˜¸ì¶œí•˜ë©´, undefinedê°€ ë°˜í™˜ëœë‹¤.

```javascript
console.log(bye); // undefined
var bye = function () {
  // í•¨ìˆ˜ í‘œí˜„ì‹
  console.log("bye");
};
```

* **const, let í‚¤ì›Œë“œì˜ ë³€ìˆ˜ í˜¸ì´ìŠ¤íŒ…**

  í•¨ìˆ˜ í‘œí˜„ì‹ê³¼ ë³€ìˆ˜ê°€ constë‚˜ letìœ¼ë¡œ í• ë‹¹ëœë‹¤ë©´, ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ í‘œí˜„ì‹ ì„ ì–¸ë¬¸ ì´ì „ì— í˜¸ì¶œí•˜ë ¤ê³  í•˜ë©´, Reference Errorê°€ ë°œìƒí•œë‹¤. ì´ëŠ” constë‚˜ letìœ¼ë¡œ í• ë‹¹í•œ ë³€ìˆ˜ëŠ” ìŠ¤ì½”í”„ ì´ˆê¸°ì— ì„ ì–¸ ë‹¨ê³„ë§Œ ì¼ì–´ë‚˜ê³ , ì„ ì–¸ë¬¸ì— ë„ë‹¬í•´ì•¼ ì´ˆê¸°í™” ë‹¨ê³„ê°€ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ ì„ ì–¸ë¬¸ ì´ì „ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì€ ë©”ëª¨ë¦¬ì— í•´ë‹¹ ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ í‘œí˜„ì‹ì´ ì—†ê¸° ë•Œë¬¸ì— Reference Errorê°€ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤. 

```javascript
console.log(goodBye); // ReferenceError: Cannot access 'goodBye' before initialization

const goodBye = function () {
  // í•¨ìˆ˜ í‘œí˜„ì‹
  console.log("goodBye");
};
```

### 1-3 this value ê²°ì •

ë³€ìˆ˜ ì„ ì–¸ ì²˜ë¦¬ í›„, this valueê°€ ê²°ì •ëœë‹¤.

* **this value**ê°€ ê²°ì •ë˜ê¸° ì „ì— thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆë‹¤ê°€, í•¨ìˆ˜ í˜¸ì¶œ íŒ¨í„´ì— ì˜í•´ thisì— í• ë‹¹ë˜ëŠ” ê°’ì´ ê²°ì •ëœë‹¤.
* ì „ì—­ ì½”ë“œì˜ ê²½ìš°, VO, ìŠ¤ì½”í”„ ì²´ì¸, thisëŠ” í•­ìƒ ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤. 

  ![](https://i.imgur.com/5nGKcVL.png)

## ğŸ“Œ 2. ì „ì—­ ì½”ë“œ ì‹¤í–‰

ì§€ê¸ˆê¹Œì§€ëŠ” í”„ë¡œê·¸ë¨ ì‹¤í–‰ì„ ìœ„í•œ ì¤€ë¹„ ê³¼ì •ì´ì—ˆë‹¤. ì§€ê¸ˆë¶€í„° ì½”ë“œê°€ ì‹œì‘ëœë‹¤.

```javascript
var x = 'xxx';

function foo () {
  var y = 'yyy';

  function bar () {
    var z = 'zzz';
    console.log(x + y + z);
  }
  bar();
}

foo()
```

ìœ„ ì˜ˆì œì—ì„œëŠ” ë³€ìˆ˜ xì— 'xxx'í• ë‹¹ê³¼ í•¨ìˆ˜ fooì˜ í˜¸ì¶œì´ ì‹¤í–‰ëœë‹¤.

### 2-1. ë³€ìˆ˜ xì— ê°’ í• ë‹¹

í˜„ì¬ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ìŠ¤ì½”í”„ ì²´ì¸ì€ ì°¸ì¡° ê°€ëŠ¥í•œ VOë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ê°–ê³  ìˆë‹¤. 0ë²ˆì§¸ VOë¶€í„° ê²€ìƒ‰í•˜ì—¬ ë³€ìˆ˜ëª… xì— í•´ë‹¹í•˜ëŠ” í”„ë¡œí¼í‹°ê°€ ë°œê²¬ë˜ë©´, ê·¸ í”„ë¡œí¼í‹°ì— ê°’ 'xxx'ë¥¼ í• ë‹¹í•œë‹¤.

![](https://i.imgur.com/6PmQzPQ.png)

### 2-2. í•¨ìˆ˜ foo í˜¸ì¶œ

* í•¨ìˆ˜ fooê°€ í˜¸ì¶œë˜ë©´, ìƒˆë¡œìš´ í•¨ìˆ˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒê¸°ê³ , ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— pushëœë‹¤. 
* ì»¨íŠ¸ë¡¤ì´ í•¨ìˆ˜ fooì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¡œ ì´ë™í•˜ë©´, ë§ˆì°¬ê°€ì§€ë¡œ 1. ìŠ¤ì½”í”„ ì²´ì¸ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”, 2. ë³€ìˆ˜ ê°ì²´í™” ì‹¤í–‰ 3. this value ê²°ì •ì´ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤. 
* ë‹¨, ì´ ì½”ë“œëŠ” ì „ì—­ì½”ë“œê°€ ì•„ë‹Œ í•¨ìˆ˜ ì½”ë“œì´ë¯€ë¡œ, í•¨ìˆ˜ ì½”ë“œì˜ ë£°ì´ ì ìš©ëœë‹¤. 

![](https://i.imgur.com/19jIeog.png)

#### 2-2-1. ìŠ¤ì½”í”„ ì²´ì¸ì˜ ìƒì„± ë° ì´ˆê¸°í™”

í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ì˜ ìŠ¤ì½”í”„ ì²´ì¸ì€ `Scope = AO + [[Scopes]]`ë¡œ ì •ì˜í•  ìˆ˜ ìˆìœ¼ë©°, ë³´í†µ ë°°ì—´ë¡œ ë‚˜íƒ€ë‚¸ë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•´ì•¼ í•œë‹¤. fooí•¨ìˆ˜ì˜ `[[Scopes]]`ëŠ” \[1\]ì „ì—­ ì½”ë“œë¡œ ì§„ì… ì‹œ ê²°ì •ë˜ì—ˆìœ¼ë©°, ê·¸ ê°’ì€ ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤.

> foo.\[\[Scopes\]\] = \[ globalContext.VO \]

1. ì´ í•¨ìˆ˜ì˜ ë³€ìˆ˜ ê°ì²´ì¸ AOê°€ ìƒì„±ëœë‹¤.
2. í•¨ìˆ˜ fooì˜ ìŠ¤ì½”í”„ ì²´ì¸ì€ ë¨¼ì € ìì‹ ì˜ ì‹¤í–‰ í™˜ê²½ì¸ fooì˜ Activation Object\(AO\)ë¥¼ ê°€ë¦¬í‚¨ë‹¤. ![](https://i.imgur.com/CfikAd7.png)
3. AOëŠ” arguments í”„ë¡œí¼í‹°ì˜ ì´ˆê¸°í™”ë¥¼ ì‹¤í–‰í•œë‹¤.
4. fooí•¨ìˆ˜ì˜ `[[Scopes]]`ê°€ ìŠ¤ì½”í”„ ì²´ì¸ì— pushëœë‹¤. ì¦‰, fooì˜ ìŠ¤ì½”í”„ ì²´ì¸ì€ AOì™€ GOë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ë‹´ì€ ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ë¦¬í‚¤ê²Œ ëœë‹¤.

   > fooContext.Scope = fooContext.AO + foo.\[\[Scopes\]\]
   >
   > fooContext.Scope = \[ fooContext.AO, globalContext.VO \]

![](https://i.imgur.com/Dp48nxY.png)

#### 2-2-2. ë³€ìˆ˜ ê°ì²´í™” \(Variable Instantiation\) ì‹¤í–‰

Function CodeëŠ” AOì— ëŒ€í•´ ë³€ìˆ˜ ê°ì²´í™”ë¥¼ ì‹¤í–‰í•œë‹¤. 1. bar í•¨ìˆ˜ ì²˜ë¦¬ - bar í•¨ìˆ˜ ìƒì„±

![](https://i.imgur.com/r0n7rMo.png)

* AOì— í•¨ìˆ˜ ì´ë¦„ barë¥¼ í”„ë¡œí¼í‹°ë¡œ, barì˜ í•¨ìˆ˜ ê°ì²´ë¥¼ ê°’ìœ¼ë¡œ í•˜ì—¬ í•¨ìˆ˜ë¥¼ ì¶”ê°€í•œë‹¤.
* bar í•¨ìˆ˜ ê°ì²´ì˜ ë‚´ë¶€ í”„ë¡œí¼í‹°ì¸ `[[Scopes]]` í”„ë¡œí¼í‹°ëŠ” ìŠ¤ì½”í”„ ì²´ì¸ì´ ê°€ë¦¬í‚¤ëŠ” ê°’ì„ ê°€ë¦¬í‚¨ë‹¤. 

> bar.\[\[Scope\]\] = \[ fooContext.AO, globalContext.VO \]

1. ë³€ìˆ˜ y ì²˜ë¦¬ - ë³€ìˆ˜ í˜¸ì´ìŠ¤íŒ…

   ![](https://i.imgur.com/MmcGxgK.png)

ë³€ìˆ˜ëª… yë¥¼ í”„ë¡œí¼í‹°ë¡œ, undefinedë¥¼ ê°’ìœ¼ë¡œ í•˜ì—¬ AOì— ì¶”ê°€í•œë‹¤.

#### 2-2-3. this value ê²°ì •

thisì— í• ë‹¹ë˜ëŠ” ê°’ì€ í•¨ìˆ˜ í˜¸ì¶œ íŒ¨í„´ì— ì˜í•´ ê²°ì •ëœë‹¤.

* ë‚´ë¶€í•¨ìˆ˜ì˜ ê²½ìš°, thisì˜ ê°’ì€ ì „ì—­ ê°ì²´ì´ë‹¤. 

  ![](https://i.imgur.com/4eoI0N7.png)

## ğŸ“Œ 3. foo í•¨ìˆ˜ ì½”ë“œ ì‹¤í–‰

```javascript
var x = 'xxx';

function foo () {
  var y = 'yyy';

  function bar () {
    var z = 'zzz';
    console.log(x + y + z);
  }
  bar();
}

foo();
```

ë¨¼ì € y ë³€ìˆ˜ì— 'yyy'ë¥¼ í• ë‹¹í•˜ê³ , í•¨ìˆ˜ barê°€ ì‹¤í–‰ëœë‹¤.

### 3-1 ë³€ìˆ˜ ê°’ í• ë‹¹

ë³€ìˆ˜ yì— ê°’ì„ í• ë‹¹í•˜ê¸° ìœ„í•´, ìŠ¤ì½”í”„ ì²´ì¸ì„ ë”°ë¼ ê°€ë©° VOì— ë³€ìˆ˜ëª… yë¥¼ ê²€ìƒ‰í•œë‹¤. yë¥¼ ë°œê²¬í•˜ë©´, ê·¸ í”„ë¡œí¼í‹°ì— ê°’ì„ 'yyy'ë¡œ í• ë‹¹í•œë‹¤.

![](https://i.imgur.com/Et85LOf.png)

### 3-2 í•¨ìˆ˜ bar í˜¸ì¶œ

í•¨ìˆ˜ barê°€ í˜¸ì¶œë˜ë©´, barì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ê³ , ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— í‘¸ì‰¬ëœë‹¤. ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ 1. ìŠ¤ì½”í”„ ì²´ì¸ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™” 2. ë³€ìˆ˜ ê°ì²´í™” ì‹¤í–‰ 3. this ê²°ì •ì´ ìˆœì°¨ì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤.

![](https://i.imgur.com/YIozAga.png)

ìŠ¤ì½”í”„ ì²´ì¸ ìƒì„±ì‹œ, barì˜ ìŠ¤ì½”í”„ ì²´ì¸ì€ barì˜ VOì¸ AO-2ë¥¼ ì°¸ì¡°í•˜ê²Œ ëœë‹¤. ê·¸ í›„ barì˜ `[[Scopes]]`ë¥¼ ìŠ¤ì½”í”„ ì²´ì¸ì— pushí•œë‹¤. ê²°ê³¼ì ìœ¼ë¡œ bar í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ì˜ ìŠ¤ì½”í”„ ì²´ì¸ì€ ë‹¤ìŒì²˜ëŸ¼ êµ¬ì„±ëœë‹¤.

> barContext.Scope = \[ barContext.AO fooContext.AO, globalContext.VO \]

## ğŸ“Œ 4. bar í•¨ìˆ˜ ì½”ë“œ ì‹¤í–‰

`console.log(x + y + z);`ì˜ ê²°ê³¼ëŠ” xxxyyyzzzì¸ë°, bar í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ì˜ ìŠ¤ì½”í”„ ì²´ì¸ì—ì„œ ë³€ìˆ˜ë¥¼ ê²€ìƒ‰í•˜ì—¬ ì°¾ì„ ìˆ˜ ìˆë‹¤.

> barContext.Scope = \[ barContext.AO - z : 'zzz' fooContext.AO, - y : 'yyy' globalContext.VO - x : 'xxx' \]

## ğŸ“Œ ì •ë¦¬

* ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” í•¨ìˆ˜ í˜¸ì¶œì‹œ ìƒì„±ë˜ë©°, ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— í‘¸ì‰¬ëœë‹¤.
* ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìƒì„±ì‹œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ì„¸ ê°€ì§€ ê°ì²´ì— ëŒ€í•œ ì²˜ë¦¬ê°€ ì´ë£¨ì–´ì§„ë‹¤.

  > 1. ìŠ¤ì½”í”„ì²´ì¸ ìƒì„±ê³¼ ì´ˆê¸°í™”
  >    * í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ì˜ ê²½ìš° ìŠ¤ì½”í”„ ì²´ì¸ì€ `Scope = AO + [[Scopes]]`ì´ë‹¤.
  > 2. ë³€ìˆ˜ ê°ì²´í™”
  >    1. ë§¤ê°œë³€ìˆ˜ì™€ ì¸ìˆ˜ ì •ë³´ ì¶”ê°€
  >    2. í•¨ìˆ˜ í˜¸ì´ìŠ¤íŒ…
  >       * property : í•¨ìˆ˜ ì´ë¦„
  >       * value : í•¨ìˆ˜ ê°ì²´
  >    3. ë³€ìˆ˜ í˜¸ì´ìŠ¤íŒ…
  >       * property : ë³€ìˆ˜ëª…
  >       * value : undefined
  > 3. this value ê²°ì •

* í•¨ìˆ˜ì˜ `[[Scopes]]` ê²°ì •
  * í•¨ìˆ˜ ê°ì²´ ìƒì„± ì‹œ ê²°ì •ëœë‹¤.
  * í•¨ìˆ˜ ê°ì²´ë¥¼ ìƒì„±í•œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ìŠ¤ì½”í”„ ì²´ì¸ì´ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

## ì°¸ì¡°

* [ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì™€ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë™ì‘ ì›ë¦¬-poiemaweb](https://poiemaweb.com/js-execution-context)
* [dmitrysoshnikov.com/ecmascript/chapter-4-scope-chain](http://dmitrysoshnikov.com/ecmascript/chapter-4-scope-chain/#function-creation)

